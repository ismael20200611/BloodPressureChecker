<!DOCTYPE html>
<html lang="ku" dir="rtl">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ุงูุฑุฆูุณูุฉ</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" defer></script>
    <script src="../js/script.js" defer></script>
    <style>

    </style>
</head>

<body>
    <!-- Header with Logo -->
    <header>
        <nav>
            <a href="#" class="logo"><img src="../img/logo.PNG" alt="Logo" class="logo" /></a> &nbsp;&nbsp;&nbsp;

            <!-- Hamburger toggle for mobile -->
            <div class="menu-toggle" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>

            <ul id="navLinks">
                <li><a href="ar_index.html" class="active">ุงูุฑุฆูุณูุฉ</a></li>
                <li><a href="ar_product.html">ููุชุฌ</a></li>
                <li><a href="ar_about.html">ุนู</a></li>
                <li><a href="ar_contact.html">ุงุชุตุงู</a></li>
                <li class="dropdown">
                    <a href="#" class="dropbtn">ุงููุบู โผ</a>
                    <div class="dropdown-content">
                        <a href="../index.html">ุงูุฅูุฌููุฒูุฉ</a>
                        <a href="../Ku/ku_index.html">ุงููุฑุฏูุฉ</a>
                        <!-- <a href="../fr/fr_index.html">ูุฑูุณู</a>
                        <a href="../sp/sp_index.html">ุงูุฃุณุจุงููุฉ</a>
                        <a href="../po/po_index.html">ุงูุจูููุฏูุฉ</a>
                        <a href="../it/it_index.html">ุฅูุทุงูู</a>
                        <a href="../ch/ch_index.html">ุงูุตูููุฉ</a>
                        <a href="../ge/ge_index.html">ุงูุฃููุงููุฉ</a> -->
                    </div>
                </li>
            </ul>

        </nav>
    </header>

    <div class="container">
        <h1>ุฌูุงุฒ ููุงุณ ุถุบุท ุงูุฏู</h1>
        <p>ุชุญูู ูู ุถุบุท ุฏูู ูุงุญุตู ุนูู ุชุนูููุงุช ููุฑูุฉ.</p>
        <p>ุฃุฏุฎู ุชูุงุตููู ุฃุฏูุงู:</p>
        <div class="top-group">
            <input type="text" id="fullName" placeholder="Full Name  - ุงูุงุณู ุงููุงูู " />
            <input type="number" id="age" placeholder="Age - ุนูุฑ" min="1" />
            <select id="gender">
                <option value="male">ุฐูุฑ</option>
                <option value="female">ุฃูุซู</option>
            </select>

        </div>
        <div class="product-list">
            <div class="product-item1">
                <img src="../img/device.png" alt="Product 1">
            </div>
            <div class="product-item2">
                <div class="input-group">
                    <input type="number" id="systolic" placeholder="Systolic" />
                    <input type="number" id="diastolic" placeholder="Diastolic" />
                    <input type="number" id="pulse" placeholder="โค Pulse" />
                </div>
            </div>
        </div>


        <div id="dateTimeDisplay">ุฌุงุฑู ุชุญููู ุงูููุช ุงูุญุงูู...</div>

        <button onclick="checkBP()" class="sound-Jazak">ุชุญูู ูู ุถุบุท ุงูุฏู</button>

        <div id="result"></div>

        <!-- Danger buttons hidden by default -->
        <button  class="sound-Jazak" onclick="showHelp()" id="helpButton" class="danger-btn" style="display:none;" >๐จ ูุงุฐุง ุชูุนู ุงูุขูุ</button>
        <!-- Add this div below the buttons -->
        <div id="helpGuide" style="display:none; 
  margin-top: 15px; 
  max-width: 600px; 
  background: #fff3f3; 
  border: 1px solid #e55353; 
  color: #a94442; 
  padding: 15px; 
  border-radius: 8px; 
  text-align: right;">
            <strong>๐จ ูุงุฐุง ุชูุนู ุงูุขูุ</strong>
            <ul>
                <li>ุงุจู ูุงุฏุฆูุง ูุณุงุนุฏ ุงูุดุฎุต ุนูู ุงูุฌููุณ ุจุดูู ูุฑูุญ.</li>
                <li>ุงูุชุญ ุฃู ููุงุจุณ ุถููุฉ.</li>
                <li>ุดุฌุน ุนูู ุงูุชููุณ ุงูุจุทูุก ูุงูุนููู.</li>
                <li>ุฅุฐุง ุชู ูุตููุ ูุฏู ุฏูุงุก ุถุบุท ุงูุฏู ุงูุทุงุฑุฆ.</li>
                <li>ูุง ุชุนุทู ุงููุงูููู ุฃู ุงูููุจูุงุช.</li>
                <li>ุงุจููู ูุชููุธูู ูุฌุงูุณูู ุจุดูู ูุณุชููู.</li>
                <li>ุงุชุตู ุจุงูุดุฑุทุฉ ุนูู ุงูุฑูู 911 ูุงุจู ูุนูู ุญุชู ูุตูู ุงููุณุงุนุฏุฉ.</li>
            </ul>
        </div>
        <button onclick="speakGuide()" id="speakButton" class="danger-btn Voice-Guidance" style="display:none;">๐ ุฅุฑุดุงุฏุงุช ุงูุตูุช</button>

        <button onclick="downloadCSV()" class="sound-Jazak">๐ฅ ุชูุฒูู ููู CSV</button>
        <button onclick="window.print()" class="sound-Jazak">๐จ๏ธ ุทุจุงุนุฉ ุงููุชุงุฆุฌ</button>

        <div class="history">
            <h3>๐ ุขุฎุฑ 100 ุชุญูู:</h3>
            <ul id="historyList"></ul>
        </div>

        <div class="description">
            <strong>ุฏููู ุถุบุท ุงูุฏู:</strong> ุชุชูุงูุช ุงููุทุงูุงุช ุงูุทุจูุนูุฉ ุญุณุจ ุงูุนูุฑ ูุงูุฌูุณ. ุชุญูู ุจุงูุชุธุงู ูุงุณุชุดุฑ ุทุจูุจูุง ุฅุฐุง ููุช ุฎุงุฑุฌ ุงููุทุงู.
        </div>

    </div>
    <!-- Footer -->
    <footer>
        <p>ุฃูุดุฃ ุจูุงุณุทุฉ <a href="https://ismael-software.vercel.app/" target="_blank"> ูููุฒูุงู </a></p>
        <p>ุขุฎุฑ ุชุญุฏูุซ: ููููู 2025</p>
        &copy; <a class="border-bottom" href="ku_index.html">ุฌูุงุฒ ููุงุณ ุถุบุท ุงูุฏู</a>, ุฌููุน ุงูุญููู ูุญููุธุฉ.ุตูู ุจูุงุณุทุฉ<a class="border-bottom" href="https://ismael-software.vercel.app/"> ูููุฒูุงู </a>
        </p>
    </footer>

    <script>
        // Update the date/time display every second
        function updateDateTime() {
            const now = new Date();
            const options = {
                year: "numeric",
                month: "short",
                day: "numeric",
                hour: "2-digit",
                minute: "2-digit",
                second: "2-digit",
            };
            document.getElementById("dateTimeDisplay").textContent = " " + now.toLocaleString(undefined, options);
        }
        setInterval(updateDateTime, 1000);
        updateDateTime(); // initial call

        function checkBP() {
            const fullName = document.getElementById('fullName').value.trim();
            const sys = parseInt(document.getElementById('systolic').value);
            const dia = parseInt(document.getElementById('diastolic').value);
            const pulse = parseInt(document.getElementById('pulse').value);
            const gender = document.getElementById('gender').value;
            const age = parseInt(document.getElementById('age').value);

            const result = document.getElementById('result');
            const helpBtn = document.getElementById('helpButton');
            const speakBtn = document.getElementById('speakButton');

            // Validate inputs
            if (!fullName || isNaN(sys) || isNaN(dia) || isNaN(pulse) || isNaN(age)) {
                result.textContent = "ูุฑุฌู ููุก ุฌููุน ุงูุญููู ุจุดูู ุตุญูุญ.";
                result.className = 'danger';
                helpBtn.style.display = 'none';
                speakBtn.style.display = 'none';
                return;
            }

            // Save the record with current time
            const currentTime = new Date().toLocaleString();
            saveHistory({ fullName, sys, dia, pulse, gender, age, time: currentTime });

            // Determine BP status
            let dangerHigh = sys >= 180 || dia >= 120;
            let dangerLow = sys < 80 || dia < 50;
            let normal = (sys >= 90 && sys <= 130) && (dia >= 60 && dia <= 85);

            if (dangerHigh) {
                result.textContent = "โ ุฎุทุฑ ูุฑุชูุน ููุบุงูุฉ! ุงุชุตู ุจุงูุดุฑุทุฉ ุนูู ุงูููุฑ!";
                result.className = 'danger';
                helpBtn.style.display = 'inline-block';
                speakBtn.style.display = 'inline-block';
            } else if (dangerLow) {
                result.textContent = "โ ููุฎูุถ ุจุดูู ุฎุทูุฑ! ุงุทูุจ ุงููุณุงุนุฏุฉ ุงูุทุจูุฉ.";
                result.className = 'danger';
                helpBtn.style.display = 'inline-block';
                speakBtn.style.display = 'inline-block';
            } else if (!normal) {
                result.textContent = "โ๏ธ ุถุบุท ุงูุฏู ุฎุงุฑุฌ ุงููุนุฏู ุงูุทุจูุนู ููููุงู.";
                result.className = 'danger';
                helpBtn.style.display = 'none';
                speakBtn.style.display = 'none';
            } else {
                result.textContent = "โ ุถุบุท ุงูุฏู ูู ุงููุทุงู ุงูุทุจูุนู.";
                result.className = 'normal';
                helpBtn.style.display = 'none';
                speakBtn.style.display = 'none';
            }
        }

        // Save to localStorage and keep only last 10
        function saveHistory(entry) {
            let history = JSON.parse(localStorage.getItem("bpHistory")) || [];
            history.unshift(entry);
            history = history.slice(0, 100);
            localStorage.setItem("bpHistory", JSON.stringify(history));
            displayHistory();
        }

        // Display history list
        function displayHistory() {
            const history = JSON.parse(localStorage.getItem("bpHistory")) || [];
            const list = document.getElementById("historyList");
            list.innerHTML = '';
            history.forEach((entry, i) => {
                const li = document.createElement("li");
                li.textContent = `${i + 1}. ${entry.fullName} โ Sys: ${entry.sys}, Dia: ${entry.dia}, Pulse: ${entry.pulse} @ ${entry.time}`;
                list.appendChild(li);
            });
        }

        // Download history as CSV file
        function downloadCSV() {
            const history = JSON.parse(localStorage.getItem("bpHistory")) || [];
            if (history.length === 0) return alert("No data to download.");
            const header = ["Full Name", "Systolic", "Diastolic", "Pulse", "Gender", "Age", "Time"];
            const rows = history.map(e => [e.fullName, e.sys, e.dia, e.pulse, e.gender, e.age, e.time]);
            const csv = [header, ...rows].map(row => row.join(",")).join("\n");
            const blob = new Blob([csv], { type: "text/csv" });
            const a = document.createElement("a");
            a.href = URL.createObjectURL(blob);
            a.download = "bp_readings.csv";
            a.click();
        }

        // Alert with medical help instructions
        function showHelp() {
            const guideDiv = document.getElementById("helpGuide");
            // Toggle visibility
            if (guideDiv.style.display === "none") {
                guideDiv.style.display = "block";
            } else {
                guideDiv.style.display = "none";
            }
        }

        // Voice guidance with speech synthesis
        function speakGuide() {
            const speakBtn = document.getElementById("speakButton");
            if (window.speechSynthesis.speaking) {
                window.speechSynthesis.cancel();
                speakBtn.disabled = false;
                return;
            }
            speakBtn.disabled = true;

            const guide = [

                // "ุฅุฐุง ูุงู ุถุบุท ุงูุฏู ูุฑุชูุนูุง ุฌุฏูุงุ ุงุชุตู ุจุงูุดุฑุทุฉ ุนูู ุงูุฑูู 911.",
                // "ุฅุฐุง ูุงู ุถุบุท ุงูุฏู ููุฎูุถูุง ุฌุฏูุงุ ุงุชุตู ุจุทุจูุจู.",
                // "ุงุจู ูุงุฏุฆูุง ูุณุงุนุฏ ุงูุดุฎุต ุนูู ุงูุฌููุณ ุจุดูู ูุฑูุญ.",
                // "ุงูุชุญ ุฃู ููุงุจุณ ุถููุฉ.",
                // "ุดุฌุน ุนูู ุงูุชููุณ ุงูุจุทูุก ูุงูุนููู.",
                // "ุฅุฐุง ุชู ูุตููุ ูุฏู ุฏูุงุก ุถุบุท ุงูุฏู ุงูุทุงุฑุฆ.",
                // "ูุง ุชุนุทู ุงููุงูููู ุฃู ุงูููุจูุงุช.",
                // "ุงุจููู ูุชููุธูู ูุฌุงูุณูู ุจุดูู ูุณุชููู."

            ];
            const speech = new SpeechSynthesisUtterance(guide.join(" "));

            speech.onend = () => {
                speakBtn.disabled = false;
            };

            window.speechSynthesis.speak(speech);
        }

    </script>


    <!-- Sound effect for button click -->
    <audio id="click-Jazak" src="../sound/Jazak-Allahu khayran kathiran fi ad-dunya wal-akhirah.mp3"
        preload="auto"></audio>
    <!-- <button class="sound-Jazak">Click Me</button> -->
    <script>
        const buttonsJazak = document.querySelectorAll('.sound-Jazak');
        const soundJazak = document.getElementById('click-Jazak');

        buttonsJazak.forEach(button => {
            button.addEventListener('click', () => {
                soundJazak.currentTime = 0;
                soundJazak.play();
            });
        });
    </script>

    <!-- Sound effect for button click -->
    <audio id="click-Voice" src="../sound/ttsMP3.com_help.mp3" preload="auto"></audio>
    <!-- <button class="Voice-Guidance">Click Me</button> -->
    <script>
    const buttons = document.querySelectorAll('.Voice-Guidance');
  const sound = document.getElementById('click-Voice');

  buttons.forEach(button => {
    button.addEventListener('click', () => {
      sound.currentTime = 0;
      sound.play();
    });
  });
</script>

</body>

</html>